import{c as e,u as a,d as l,g as r}from"./table-87adb3ab.js";import{bm as t,bI as n,bJ as o,bp as u,bK as s,aX as i,bu as d}from"./index-193e42d5.js";import{aq as p,x as c,as as m,aZ as g,m as f,b4 as v,k as h,b2 as _,u as b,aw as y,ax as w,ak as C,aS as z,t as k,n as V,aK as x}from"./runtime-core.esm-bundler-1857aef3.js";import{G as P}from"./index-bdb1e4a6.js";import{_ as S}from"./_plugin-vue_export-helper-1b428a4d.js";import"./user-b95005ad.js";import"./vue-router-5ddbd26f.js";import"./error-c58402b8.js";const j={total:0,currentPage:1,pageSizes:[10,20,50],pageSize:10,layout:"total, sizes, prev, pager, next, jumper"};const U={class:"app-container"},q={class:"toolbar-wrapper"},T={class:"table-wrapper"},B={class:"pager-wrapper"},D=S(c({__name:"index",setup(c){const S=m(!1),{paginationData:D,handleCurrentChange:F,handleSizeChange:I}=function(e={}){const a=p(Object.assign({...j},e));return{paginationData:a,handleCurrentChange:e=>{a.currentPage=e},handleSizeChange:e=>{a.pageSize=e}}}(),K=m(!1),R=m(null),G=p({username:"",password:""}),J=p({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}]}),O=()=>{var l;null==(l=R.value)||l.validate((l=>{if(!l)return!1;void 0===Z.value?e({username:G.username,password:G.password}).then((()=>{d.success("新增成功"),K.value=!1,H()})):a({id:Z.value,username:G.username}).then((()=>{d.success("修改成功"),K.value=!1,H()}))}))},X=()=>{Z.value=void 0,G.username="",G.password=""},Z=m(void 0),$=m([]),A=m(null),E=p({username:"",phone:""}),H=()=>{S.value=!0,r({currentPage:D.currentPage,size:D.pageSize,username:E.username||void 0,phone:E.phone||void 0}).then((e=>{D.total=e.data.total,$.value=e.data.list})).catch((()=>{$.value=[]})).finally((()=>{S.value=!1}))},L=()=>{1===D.currentPage&&H(),D.currentPage=1},M=()=>{var e;null==(e=A.value)||e.resetFields(),1===D.currentPage&&H(),D.currentPage=1},N=()=>{H()};return g([()=>D.currentPage,()=>D.pageSize],H,{immediate:!0}),(e,a)=>{const r=y("el-input"),p=y("el-form-item"),c=y("el-button"),m=y("el-form"),g=y("el-card"),j=y("el-tooltip"),Q=y("el-table-column"),W=y("el-tag"),Y=y("el-table"),ee=y("el-pagination"),ae=y("el-dialog"),le=w("loading");return C(),f("div",U,[v((C(),h(g,{shadow:"never",class:"search-wrapper"},{default:_((()=>[b(m,{ref_key:"searchFormRef",ref:A,inline:!0,model:E},{default:_((()=>[b(p,{prop:"username",label:"用户名"},{default:_((()=>[b(r,{modelValue:E.username,"onUpdate:modelValue":a[0]||(a[0]=e=>E.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(p,{prop:"phone",label:"手机号"},{default:_((()=>[b(r,{modelValue:E.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>E.phone=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(p,null,{default:_((()=>[b(c,{type:"primary",icon:z(t),onClick:L},{default:_((()=>[k("查询")])),_:1},8,["icon"]),b(c,{icon:z(n),onClick:M},{default:_((()=>[k("重置")])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])])),_:1})),[[le,S.value]]),v((C(),h(g,{shadow:"never"},{default:_((()=>[V("div",q,[V("div",null,[b(c,{type:"primary",icon:z(o),onClick:a[2]||(a[2]=e=>K.value=!0)},{default:_((()=>[k("新增用户")])),_:1},8,["icon"]),b(c,{type:"danger",icon:z(u)},{default:_((()=>[k("批量删除")])),_:1},8,["icon"])]),V("div",null,[b(j,{content:"下载"},{default:_((()=>[b(c,{type:"primary",icon:z(s),circle:""},null,8,["icon"])])),_:1}),b(j,{content:"刷新表格"},{default:_((()=>[b(c,{type:"primary",icon:z(i),circle:"",onClick:N},null,8,["icon"])])),_:1})])]),V("div",T,[b(Y,{data:$.value},{default:_((()=>[b(Q,{type:"selection",width:"50",align:"center"}),b(Q,{prop:"username",label:"用户名",align:"center"}),b(Q,{prop:"roles",label:"角色",align:"center"},{default:_((e=>["admin"===e.row.roles?(C(),h(W,{key:0,effect:"plain"},{default:_((()=>[k("admin")])),_:1})):(C(),h(W,{key:1,type:"warning",effect:"plain"},{default:_((()=>[k(x(e.row.roles),1)])),_:2},1024))])),_:1}),b(Q,{prop:"phone",label:"手机号",align:"center"}),b(Q,{prop:"email",label:"邮箱",align:"center"}),b(Q,{prop:"status",label:"状态",align:"center"},{default:_((e=>[e.row.status?(C(),h(W,{key:0,type:"success",effect:"plain"},{default:_((()=>[k("启用")])),_:1})):(C(),h(W,{key:1,type:"danger",effect:"plain"},{default:_((()=>[k("禁用")])),_:1}))])),_:1}),b(Q,{prop:"createTime",label:"创建时间",align:"center"}),b(Q,{fixed:"right",label:"操作",width:"150",align:"center"},{default:_((e=>[b(c,{type:"primary",text:"",bg:"",size:"small",onClick:a=>{return l=e.row,Z.value=l.id,G.username=l.username,G.password=l.password,void(K.value=!0);var l}},{default:_((()=>[k("修改")])),_:2},1032,["onClick"]),b(c,{type:"danger",text:"",bg:"",size:"small",onClick:a=>{return r=e.row,void P.confirm(`正在删除用户：${r.username}，确认删除？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l(r.id).then((()=>{d.success("删除成功"),H()}))}));var r}},{default:_((()=>[k("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),V("div",B,[b(ee,{background:"",layout:z(D).layout,"page-sizes":z(D).pageSizes,total:z(D).total,"page-size":z(D).pageSize,currentPage:z(D).currentPage,onSizeChange:z(I),onCurrentChange:z(F)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[le,S.value]]),b(ae,{modelValue:K.value,"onUpdate:modelValue":a[6]||(a[6]=e=>K.value=e),title:void 0===Z.value?"新增用户":"修改用户",onClose:X,width:"30%"},{footer:_((()=>[b(c,{onClick:a[5]||(a[5]=e=>K.value=!1)},{default:_((()=>[k("取消")])),_:1}),b(c,{type:"primary",onClick:O},{default:_((()=>[k("确认")])),_:1})])),default:_((()=>[b(m,{ref_key:"formRef",ref:R,model:G,rules:J,"label-width":"100px","label-position":"left"},{default:_((()=>[b(p,{prop:"username",label:"用户名"},{default:_((()=>[b(r,{modelValue:G.username,"onUpdate:modelValue":a[3]||(a[3]=e=>G.username=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(p,{prop:"password",label:"密码"},{default:_((()=>[b(r,{modelValue:G.password,"onUpdate:modelValue":a[4]||(a[4]=e=>G.password=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-ae84d634"]]);export{D as default};
